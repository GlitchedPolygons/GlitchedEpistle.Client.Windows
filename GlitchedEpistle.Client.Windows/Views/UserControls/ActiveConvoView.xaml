<UserControl x:Class="GlitchedPolygons.GlitchedEpistle.Client.Windows.Views.UserControls.ActiveConvoView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:GlitchedPolygons.GlitchedEpistle.Client.Windows.Views.UserControls"
             mc:Ignorable="d">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="40"/>
            <RowDefinition Height="*" MinHeight="200"/>
            <RowDefinition Height="150"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0"
                    Margin="0"
                    Orientation="Horizontal" 
                    HorizontalAlignment="Center" 
                    VerticalAlignment="Top">

            <Label FontSize="24" 
                   Padding="0"
                   VerticalAlignment="Center"
                   Content="{Binding Path=ActiveConvo.Name}"/>

            <Rectangle Width="1" 
                       Margin="15,0,15,0" 
                       VerticalAlignment="Stretch" 
                       Stroke="{StaticResource SeparatorColorBrush}" />

            <Label Content="{Binding Path=ActiveConvo.Id}"
                   FontSize="12" 
                   Padding="0,0,0,0" 
                   Foreground="Gray" 
                   VerticalAlignment="Center"
                   FontStyle="Italic"/>

            <Button Width="15" 
                    Height="15"
                    Margin="4,0,0,0"
                    ToolTip="Copy user id to clipboard"
                    Command="{Binding CopyConvoIdToClipboardCommand}"
                    Style="{StaticResource CopyToClipboardButton}"/>

            <Image Source="/Resources/Images/green-tick.png" 
                   Width="15" 
                   Height="15"
                   Margin="1,0,0,0" 
                   Visibility="{Binding ClipboardTickVisibility}"/>
        </StackPanel>

        <Grid Grid.Row="2" HorizontalAlignment="Stretch">

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="80"/>
                <ColumnDefinition Width="0.5"/>
            </Grid.ColumnDefinitions>

            <TextBox Grid.Column="0" 
                     Name="TextBox" 
                     FontSize="14"
                     MinWidth="200"
                     TextWrapping="Wrap"
                     HorizontalAlignment="Stretch"
                     HorizontalContentAlignment="Stretch"
                     HorizontalScrollBarVisibility="Disabled"
                     VerticalScrollBarVisibility="Auto" 
                     Style="{StaticResource TextBox}"/>

            <Grid Grid.Column="1" MinWidth="80">

                <Grid.RowDefinitions>
                    <RowDefinition Height="1"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="1"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="1"/>
                </Grid.RowDefinitions>

                <Rectangle Grid.Row="0" 
                           Opacity="0.65"
                           HorizontalAlignment="Stretch" 
                           Stroke="{StaticResource SeparatorColorBrush}" />

                <Button Grid.Row="1" 
                        BorderThickness="0" 
                        Content="Attach"
                        Command="{Binding AttachCommand}"/>

                <Rectangle Grid.Row="2" 
                           Opacity="0.65"
                           HorizontalAlignment="Stretch" 
                           Stroke="{StaticResource SeparatorColorBrush}" />

                <Button Grid.Row="3" 
                        BorderThickness="0"
                        Content="Send"
                        Command="{Binding SendCommand}"
                        CommandParameter="{Binding ElementName=TextBox, Path=Text}"/>

                <Rectangle Grid.Row="4" 
                           Opacity="0.65"
                           HorizontalAlignment="Stretch" 
                           Stroke="{StaticResource SeparatorColorBrush}" />
            </Grid>

            <Rectangle Grid.Column="2" 
                       Width="0.5" 
                       Opacity="0.65"
                       VerticalAlignment="Stretch" 
                       Stroke="{StaticResource SeparatorColorBrush}" />
        </Grid>
    </Grid>

    <UserControl.InputBindings>
        <KeyBinding Key="Enter" 
                    Command="{Binding SendCommand}"
                    CommandParameter="{Binding ElementName=TextBox, Path=Text}"/>
    </UserControl.InputBindings>

</UserControl>
